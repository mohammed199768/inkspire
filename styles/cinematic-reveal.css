/* Cinematic Reveal Styles - v4 Clean & Bottom Aligned */

/* Container */
.re-reveal-container {
    position: relative;
    width: 100%;
    height: 100%;
    z-index: 1;
    pointer-events: none;
    overflow: visible;
    background-color: transparent;
    display: flex;
    justify-content: center;
    align-items: flex-end;
}

@media (min-width: 1025px) {
    .re-reveal-container {
        position: absolute;
        inset: 0;
    }
}

/* 
   GRID LAYOUT 
   - "Images down" -> align-items: flex-end in container
*/
.re-stacks-grid {
    display: flex;
    justify-content: center;
    align-items: flex-end;
    width: 100%;
    height: 100%;
    position: relative;
    z-index: 2;
    padding-bottom: 0px;
}

/* 
   STACK 
   - Treated as "Cutout Characters"
*/
.re-stack {
    position: relative;
    /* Responsive Width: Large & Impactful */
    width: clamp(100px, 30vw, 700px);
    flex: 0 0 auto;

    /* Responsive Spacing - Subtle Overlap */
    margin: 0 calc(var(--overlap, -1.5vw));

    aspect-ratio: 4/5;
    max-height: 95vh;

    /* Invisible Container - Only images show */
    overflow: hidden;
    border-radius: 2rem;
    background: transparent;
    
    /* Removed all visual box indicators */
    box-shadow: none; 
    backdrop-filter: none;

    /* Base Filters - Darker for unrevealed state */
    filter: brightness(0.6) contrast(1.05) grayscale(0.2);

    will-change: transform, filter, z-index;
    transition: filter 0.4s ease-out, transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
}

/* 
   Symmetric Arc Layout
   Applying responsive offsets
*/
.re-stack:nth-child(1),
.re-stack:nth-child(4) {
    --y-offset: clamp(2vh, 4vh, 6vh);
    transform: translateY(var(--y-offset)) scale(1);
    z-index: 1;
}

/* Lifted Middle Images */
.re-stack.re-stack-lifted {
    --y-offset: clamp(-10vh, -18vh, -25vh);
    transform: translateY(var(--y-offset)) scale(1.05);
    z-index: 5;
}

/* Disable Hover Lift on non-hover devices */
@media (hover: hover) {
    .re-stack:hover {
        z-index: 10 !important;
        filter: brightness(1) contrast(1.1) grayscale(0);
    }
}

/* 
   TOUCH / MOBILE STATE
   - Show 4 images on one line
   - No reveal animation (handled by is-touch class)
*/
.re-reveal-container.is-touch .re-stack {
    filter: brightness(0.9) contrast(1.1) grayscale(0);
    transform: translateY(var(--y-offset)) scale(1) !important;
    transition: none !important;
    --overlap: -3vw; /* Slightly more overlap for tight fit */
}

.re-reveal-container.is-touch .re-stacks-grid {
    padding-bottom: 2rem;
    height: auto;
    min-height: 40vh;
}

.re-stack-base {
    z-index: 1;
}

.re-stack-overlay {
    z-index: 2;
    opacity: 0;
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    will-change: opacity, mask-image;
    filter: saturate(1.2) brightness(1.1);
}

/* 
   GLOBAL LAYERS 
*/

/* Grain Removed */
.re-grain {
    display: none;
}

.re-dim-layer {
    position: absolute;
    inset: 0;
    z-index: 5;
    /* Bottom gradient to blend feet */
    background: linear-gradient(to top, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0) 50%);
    pointer-events: none;
}

.re-spotlight {
    position: absolute;
    top: 0;
    left: 0;
    width: clamp(600px, 100vw, 1400px);
    height: clamp(600px, 100vw, 1400px);
    transform: translate(calc(var(--sx, -1000px) - 50%), calc(var(--sy, -1000px) - 50%));
    z-index: 20;
    pointer-events: none;

    background: radial-gradient(circle,
            rgba(255, 255, 255, 0.15) 0%,
            rgba(255, 255, 255, 0.05) 30%,
            margin-box,
            rgba(255, 255, 255, 0) 70%);

    mix-blend-mode: overlay;
    opacity: var(--spot-op, 0);
    transition: opacity 0.3s ease;
    will-change: transform, opacity;
}
@media (min-width: 768px) and (max-width: 1024px) {
  .re-reveal-container {
    position: relative !important;
    inset: auto !important;
    height: auto !important;
    min-height: 55vh;
    display: flex;
    align-items: flex-start;
    justify-content: center;
    padding-top: 10vh;
  }

  .re-stacks-grid {
    height: auto !important;
    max-height: 55vh;
  }
}
